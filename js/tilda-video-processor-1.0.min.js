function processYoutubeVideo(i,r){var e;document.getElementById("youtube-api")||((e=document.createElement("script")).id="youtube-api",e.src="https://www.youtube.com/iframe_api",document.head.insertAdjacentElement("beforeend",e)),t_videoprocessor__onFuncLoad("YT",function(){var e,t={"url-youtube":"",nomute:"",noloop:"",nocover:""};for(e in t){var o=i.getAttribute("data-content-video-"+e);o&&(t[e]=o)}"yes"!==t.nocover&&(t.nomute=""),t.mute="yes"!==t.nomute,t.loop="yes"!==t.noloop,t.cover="yes"!==t.nocover,t_videoprocessor__setYoutubePlayer(i,t),t_videoprocessor__updateVideoHeight(i,r,"youtube"),/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)||"ontouchend"in document||(window.addEventListener("resize",function(){t.cover&&t_videoprocessor__updateVideoHeight(i,r,"youtube")}),i.addEventListener("coverHeightUpdated",function(){t_videoprocessor__updateVideoHeight(i,r,"youtube")},{once:!0}))})}function t_videoprocessor__updateVideoHeight(e,t,o){var i=t;"youtube"===o&&(i=t_videoprocessor__getHeightFromAttr(t)<(parseInt(e.getAttribute("data-content-cover-updated-height"),10)||0)?e.getAttribute("data-content-cover-updated-height"):t),setWidthAndHeightVideo(e,i,o)}function t_videoprocessor__setYoutubePlayer(t,o){var i,r=document.createElement("iframe");r.src=t_videoprocessor__generateYoutubeURL(o),r.frameBorder="0",r.allow="fullscreen",r.style.opacity="0",t.appendChild(r),new YT.Player(r,{events:{onReady:function(e){-1===e.target.getPlayerState()&&"y"!==r.getAttribute("programmly-updated")&&(r.src=t_videoprocessor__generateYoutubeURL(o),r.setAttribute("programmly-updated","y")),r.style.opacity="",t_videoprocessor__pauseAndPlayYouTubeVideo(t,e.target,o.mute),t_videoprocessor__muteYouTubeVideo(e,o),e.target.setLoop(!0)},onStateChange:function(e){t_videoprocessor__muteYouTubeVideo(e,o),e.data===YT.PlayerState.PLAYING?i=t_videoprocessor__updateLoopedVideo(e.target,o):window.clearInterval(i)}}})}function t_videoprocessor__muteYouTubeVideo(e,t){e.target.setVolume&&t.mute&&e.target.setVolume(0)}function t_videoprocessor__updateLoopedVideo(o,i){return setInterval(function(){var e=o.getCurrentTime(),t=o.getDuration();t&&t<e+1&&(o.seekTo(0),i.noloop&&(o.stopVideo(),o.clearVideo()))},1e3)}function t_videoprocessor__processHTML5Video(e,t){var o;if(e)return"static"!==window.getComputedStyle(e).position&&e.style.position||(e.style.position="relative"),t.height=e.offsetHeight,o=t_videoprocessor__createHTML5Video(t),e.insertAdjacentElement("beforeend",o),setTimeout(function(){t_videoprocessor__updateVideoHeight(o,window.getComputedStyle(e).height,"html5")}),e.addEventListener("coverHeightUpdated",function(){t_videoprocessor__updateVideoHeight(o,window.getComputedStyle(e).height,"html5")},{once:!0}),window.addEventListener("resize",function(){t_videoprocessor__updateVideoHeight(o,window.getComputedStyle(e).height,"html5")}),"IntersectionObserver"in window?new IntersectionObserver(function(e){e.forEach(function(e){var t=e.target.querySelector("video");t&&(e.isIntersecting?2<=t.readyState&&t.play():t.pause())})}).observe(o):window.addEventListener("scroll",t_throttle(function(){t_videoprocessor__pauseAndPlayHTMLVideo(o)},100)),o.querySelector("video")}function t_videoprocessor__pauseAndPlayHTMLVideo(e){var t=e.querySelector("video");if(t){var o=window.pageYOffset,i=o+document.documentElement.clientHeight,r=e.getBoundingClientRect().top+o,e=r+e.offsetHeight,r=r<i&&o<=e?"inside":"near";switch(r){case"inside":2<=t.readyState&&t.play();break;case"near":t.pause()}}}function t_videoprocessor__createHTML5Video(e){var t=document.createElement("div"),o=(t.style.position=e.position,t.style.zIndex=e.zIndex,t.style.top="0",t.style.left="0",t.style.height=e.height+"px",t.style.width=e.width+"px",t.style.opacity=e.opacity,t.style.overflow="hidden",document.createElement("video")),i=(o.style.position="relative",o.style.zIndex=e.zIndex,o.style.poster=e.poster,o.style.top="0",o.style.left="0",o.style.minHeight="100%",o.style.minWidth="100%",o.style.height=e.height+"px",o.style.width=e.width+"px",o.autoplay=e.autoplay,o.loop=e.loop,o.muted=e.muted,o.volume=e.volume,o.setAttribute("playsinline",""),o.addEventListener("canplay",function(){e.autoplay&&(o.muted=!0,o.play())}),e.mp4?'video/mp4; codecs="avc1.42E01E, mp4a.40.2"':'video/webm; codecs="vp8, vorbis"');return document.createElement("video").canPlayType(i)?(o.src=e.webm||e.mp4,t.insertAdjacentElement("beforeend",o)):t.querySelector(".no-video-loader")||((i=document.createElement("img")).setAttribute("src",e.poster),i.style.position="absolute",i.style.zIndex=e.zIndex,i.style.top="0",i.style.left="0",i.style.minHeight="100%",i.style.minWidth="100%",i.classList.add("no-video-loader"),t.insertAdjacentElement("beforeend",i)),t}function setWidthAndHeightVideo(e,t,o){var i,r,n,d,s,a=e.querySelector("iframe"),c=("html5"===o&&(a=(e=(i=e).closest(".t-cover__carrier")).querySelector("video")),"yes"!==e.getAttribute("data-content-video-nocover")),u="yes"!==e.getAttribute("data-content-video-noadcut-youtube"),l="youtube"===o||"rutube"===o||"vk"===o,p=e.getAttribute("data-content-video-ratio"),u=u&&l?220:0,l=.5625;p&&0<parseFloat(p)&&(l=parseFloat(p)),c?(p=t_videoprocessor__getHeight(t,c,e,l),s=1,(d=(r=window.innerWidth)*l)-u<p&&(s=d<p?p/d:d/p,s+=.02),n=Math.floor(r*s),u=(d=Math.floor((d+u)*s))-p,s=n-r,a&&(a.style.height=d+"px"),a&&(a.style.width=n+"px"),"html5"===o&&(i.style.height=d+"px",i.style.width=n+"px"),a&&(a.style.marginTop=0<u?-Math.floor(u/2)+"px":"0"),a&&(a.style.marginLeft=0<s?-Math.floor(s/2)+"px":"0")):(p=t_videoprocessor__getHeight(t,c,e,l),a&&(a.style.width="100%"),a&&(a.style.height=p+"px"))}function t_videoprocessor__getHeight(e,t,o,i){var r;return e||(t?e="100vh":r=Math.floor(o.offsetWidth*i)),-1!==e.indexOf("vh")?(t=parseInt(e,10)||0,r=Math.floor(document.documentElement.clientHeight*(t/100))):e&&(r=parseInt(e,10)||0),r||0}function t_videoprocessor__getHeightFromAttr(e){return e?-1!==e.indexOf("vh")?parseInt(e,10)*document.documentElement.clientHeight/100:parseInt(e,10):0}function t_videoprocessor__generateYoutubeURL(e){var t=e["url-youtube"],o="https://www.youtube.com/embed",i=e.cover,e=e.mute,r=(-1===t.indexOf(o)&&(-1===t.indexOf("/")&&(t="/"+t),t=o.concat(t)),t+=-1===t.indexOf("?")?"?":"&",location.protocol+"//"+location.host),o=t.replace(o+"/",""),n=o.indexOf("?");return-1!==n&&(o=o.slice(0,n)),t=i?(t+="autoplay=1&loop=1&enablejsapi=1&playerapiid=featuredytplayer&controls=0&modestbranding=1&rel=0&showinfo=0&color=white&iv_load_policy=3&theme=light&wmode=transparent")+"&origin="+r+"&playlist="+o:(t+="autoplay=0&loop=0&enablejsapi=1&playerapiid=featuredytplayer&controls=1&modestbranding=1&rel=0&showinfo=0&color=black&iv_load_policy=3&theme=dark")+"&wmode=transparent&origin="+r,e&&(t+="&mute=1"),t}function t_videoprocessor__pauseAndPlayYouTubeVideo(d,s,e){"IntersectionObserver"in window?new IntersectionObserver(function(e){e.forEach(function(e){var t=e.target,o=s.getPlayerState(),i="y"===d.getAttribute("data-video-invisible");e.isIntersecting?(-1===o||3===o||5===o||2===o&&i)&&(s.playVideo(),t.removeAttribute("data-video-invisible")):t_videoprocessor__pauseVideo(s,o,t)})}).observe(d):window.addEventListener("scroll",t_throttle(function(){var e=window.pageYOffset,t=e+document.documentElement.clientHeight,o=d.getBoundingClientRect().top+e,i=o+d.offsetHeight,r="y"===d.getAttribute("data-video-invisible"),n=s.getPlayerState(),o=o<t&&e<=i?"inside":t<o&&o-500<t||i<e&&e<i+500?"near":"far";switch(o){case"inside":(-1===n||3===n||5===n||2===n&&r)&&(s.playVideo(),d.removeAttribute("data-video-invisible"));break;case"near":case"far":t_videoprocessor__pauseVideo(s,n,d)}},100)),e||window.addEventListener("scroll",t_throttle(function(){var e,t=window.pageYOffset,o=d.getBoundingClientRect().top+t,i=d.clientHeight,r=o+i,n=t+document.documentElement.clientHeight;r<t||n<o||(e=0,n<r&&t<n?e=Math.floor((r-n)/i*100):o<t&&t<r&&(e=Math.floor((t-o)/i*100)),s.setVolume(100-e))},100))}function t_videoprocessor__pauseVideo(e,t,o){o.setAttribute("data-video-invisible","y"),2!==t&&e.pauseVideo()}function t_videoprocessor__processIframeVideo(e,t){e.hasAttribute("data-content-video-url-vimeo")?t_videoprocessor__processVimeoVideo(e,t):e.hasAttribute("data-content-video-url-vkvideo")?t_videoprocessor__processVkVideo(e,t):e.hasAttribute("data-content-video-url-kinescope")?t_videoprocessor__processKinescopeVideo(e,t):e.hasAttribute("data-content-video-url-rutube")&&t_videoprocessor__processRutubeVideo(e,t)}function t_videoprocessor__getIframeVideoUrl(e,t,o,i){var r,n={vimeo:"https://player.vimeo.com/video/",rutube:"https://rutube.ru/play/embed/",kinescope:"https://kinescope.io/embed/"}[e];if(n)return r=t.split("?t="),t=r[0],r=r[1]||0,n+=t,t="autoplay=true&muted=true&controls=false"+(i?"":"&loop=true")+(r?"&t="+r:""),"vimeo"===e?n+="/?"+(o?"h="+o+"&":"")+t:"rutube"===e?n+="/?p="+o+"&"+t:"kinescope"===e&&(n+="/?"+t),n}function t_videoprocessor__getIframeHtml(e,t){var o=document.createElement("iframe");return o.src=e,o.frameBorder="0",o.setAttribute("allow","autoplay; fullscreen; picture-in-picture; encrypted-media; gyroscope; accelerometer; clipboard-write;"),o.style.width="100%",o.style.height=t||"100%",o.setAttribute("webkitAllowFullScreen",""),o.setAttribute("mozallowfullscreen",""),o.setAttribute("allowFullScreen",""),o.innerHTML="<p>Your browser don't support videos.</p>",o}function t_videoprocessor__processVimeoVideo(t,e){var o,i=t.getAttribute("data-content-video-url-vimeo");i?(o=e["video-noloop"],o=t_videoprocessor__getIframeHtml(i=t_videoprocessor__getIframeVideoUrl("vimeo",i,t.getAttribute("data-content-video-hash-vimeo")||"",o),e["cover-height"]),i?(t.insertAdjacentElement("beforeend",o),setTimeout(function(){var e=window.getComputedStyle(t).height||0;t_videoprocessor__updateVideoHeight(t,e,"vimeo")}),t.addEventListener("coverHeightUpdated",function(){var e=window.getComputedStyle(t).height||0;t_videoprocessor__updateVideoHeight(t,e,"vimeo")},{once:!0}),window.addEventListener("resize",t_throttle(function(){var e=window.getComputedStyle(t).height||0;t_videoprocessor__updateVideoHeight(t,e,"vimeo")},100))):t.style.backgroundImage=null):t.style.backgroundImage=null}function t_videoprocessor__processRutubeVideo(t,e){var o,i,r=t.getAttribute("data-content-video-url-rutube");r?(o=e["video-noloop"],(r=t_videoprocessor__getIframeVideoUrl("rutube",r,t.getAttribute("data-content-video-hash-rutube")||"",o))?(i=t_videoprocessor__getIframeHtml(r,e["cover-height"]),window.addEventListener("message",function(e){if(e){var t="";try{t="string"==typeof e.data?JSON.parse(e.data):e.data}catch(e){console.error(e)}t.data&&("player:ready"===t.type&&-1!==i.src.indexOf(t.data.videoId)?(t_videoprocessor__doRutubeCommand(i,"stop"),t_videoprocessor__doRutubeCommand(i,"mute"),t_videoprocessor__doRutubeCommand(i,"play")):o||"player:changeState"!==t.type||"stopped"!==t.data.state||t_videoprocessor__doRutubeCommand(i,"play"))}}),t.style.backgroundImage=null,t.insertAdjacentElement("beforeend",i),setTimeout(function(){var e=window.getComputedStyle(t).height||0;t_videoprocessor__updateVideoHeight(t,e,"rutube")}),t.addEventListener("coverHeightUpdated",function(){var e=window.getComputedStyle(t).height||0;t_videoprocessor__updateVideoHeight(t,e,"rutube")},{once:!0}),window.addEventListener("resize",t_throttle(function(){var e=window.getComputedStyle(t).height||0;t_videoprocessor__updateVideoHeight(t,e,"rutube")},100)),"IntersectionObserver"in window&&new IntersectionObserver(function(e){e.forEach(function(e){e.target===i&&(e=e.isIntersecting?"play":"pause",t_videoprocessor__doRutubeCommand(i,e))})}).observe(i)):t.style.backgroundImage=null):t.style.backgroundImage=null}function t_videoprocessor__doRutubeCommand(e,t){e.contentWindow.postMessage(JSON.stringify({type:"player:"+t,data:{}}),"*")}function t_videoprocessor__processKinescopeVideo(t,e){var o,i=t.getAttribute("data-content-video-url-kinescope");(i=i&&t_videoprocessor__getIframeVideoUrl("kinescope",i,null,e["video-noloop"]))&&((o=document.createElement("div")).classList.add("t-cover__video__wrapper"),o.style.height=e["cover-height"],e=t_videoprocessor__getIframeHtml(i),o.insertAdjacentElement("beforeend",e),t.insertAdjacentElement("beforeend",o),setTimeout(function(){var e=window.getComputedStyle(t).height||0;t_videoprocessor__updateVideoHeight(o,e,"kinescope")}),t.addEventListener("coverHeightUpdated",function(){var e=window.getComputedStyle(t).height||0;t_videoprocessor__updateVideoHeight(o,e,"kinescope")},{once:!0}),window.addEventListener("resize",t_throttle(function(){var e=window.getComputedStyle(t).height||0;t_videoprocessor__updateVideoHeight(o,e,"kinescope")},100))),t.style.backgroundImage=null}function t_videoprocessor__processVkVideo(t,e){var o,i,r,n,d=t.getAttribute("data-content-video-url-vkvideo");d&&((o=document.createElement("script")).src="https://vk.com/js/api/videoplayer.js",document.head.insertAdjacentElement("beforeend",o),o=(d=d.replace("https://vk.com/video","")).split("_"),d=t.getAttribute("data-content-video-hash-vkvideo")||"",i=t_videoprocessor__getIframeHtml("https://vk.com/video_ext.php?oid="+o[0]+"&id="+o[1]+"&hd=2"+(d?"&hash="+d:"")+"&js_api=1"),t.insertAdjacentElement("beforeend",i),r=e["video-noloop"],t_onFuncLoad("VK",function(){(n=VK.VideoPlayer(i)).on("inited",function(){n.mute(),n.play()}),r||n.on("ended",function(){n.play()})}),setTimeout(function(){var e=window.getComputedStyle(t).height||0;t_videoprocessor__updateVideoHeight(t,e,"vk")}),t.addEventListener("coverHeightUpdated",function(){var e=window.getComputedStyle(t).height||0;t_videoprocessor__updateVideoHeight(t,e,"vk")},{once:!0}),window.addEventListener("resize",t_throttle(function(){var e=window.getComputedStyle(t).height||0;t_videoprocessor__updateVideoHeight(t,e,"vk")},100)),"IntersectionObserver"in window&&new IntersectionObserver(function(e){e.forEach(function(e){n&&e.target===i&&(e.isIntersecting?n.play:n.pause)()})}).observe(i)),t.style.backgroundImage=null}function t_videoprocessor__onFuncLoad(e,t){var o;"object"==typeof window[e]&&"function"==typeof window[e].Player?t():o=setInterval(function(){"object"==typeof window[e]&&"function"==typeof window[e].Player&&(t(),clearInterval(o),o=0)},100),window.addEventListener("load",function(){setTimeout(function(){if(o){if("object"!=typeof window[e]||"function"!=typeof window[e].Player)throw clearInterval(o),new Error(e+" is undefined");t(),clearInterval(o)}},5e3)})}Element.prototype.matches||(Element.prototype.matches=Element.prototype.matchesSelector||Element.prototype.msMatchesSelector||Element.prototype.mozMatchesSelector||Element.prototype.webkitMatchesSelector||Element.prototype.oMatchesSelector),Element.prototype.closest||(Element.prototype.closest=function(e){for(var t=this;t&&1===t.nodeType;){if(Element.prototype.matches.call(t,e))return t;t=t.parentElement||t.parentNode}return null});